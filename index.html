<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Todos</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
</head>
<body>
<div class="top">
    <h1>Todos App</h1>
</div>
<div class="middle">
    <div>
        <label for="todoInput">New Todo:</label><br>
        <input placeholder="Title..." type="text" id="todoInput" name="newTodo">
        <button id="addBtn" onclick="addTodo()">Add</button>
    </div>
    <div>
        <ul id="list">
        </ul>
    </div>
</div>
<div class="bottom">
</div>
<script>
    let theList = [];

    function addTodo() {
        let todoList = document.getElementsByTagName("LI");
        let lenList = todoList.length;

        let checkbox = document.createElement("INPUT");
        checkbox.setAttribute("type", "checkbox");
        checkbox.id = 'todo'+ (lenList + 1);
        checkbox.style.display = "inline";

        let label = document.createElement("LABEL");
        label.id = 'label'+ (lenList + 1);
        label.htmlFor = checkbox.id;
        label.innerHTML = document.getElementById("todoInput").value;
        label.style.display = "inline";

        let pencilSpan = document.createElement("SPAN");
        pencilSpan.className = "glyphicon glyphicon-pencil";
        pencilSpan.style.display = "inline";
        let trashSpan = document.createElement("SPAN");
        trashSpan.className = "glyphicon glyphicon-trash";
        trashSpan.style.display = "inline";

        let newItem = document.createElement("LI");

        newItem.appendChild(checkbox);
        newItem.appendChild(label);
        newItem.appendChild(pencilSpan);
        newItem.appendChild(trashSpan);

        let labelEdit = document.createElement("LABEL");
        let inputText = document.createElement("INPUT");
        inputText.setAttribute("type", "text");
        inputText.id = "editText" + (lenList + 1);
        inputText.style.display = "none";

        labelEdit.htmlFor = inputText.id;
        labelEdit.innerHTML = "Edit: ";
        labelEdit.id = "labelEdit" + (lenList + 1);
        labelEdit.style.display = "none";


        let saveButton = document.createElement("BUTTON");
        saveButton.id = "buttonSave" + (lenList + 1);
        saveButton.innerHTML = "Save";
        saveButton.style.display = "none";

        newItem.appendChild(labelEdit);
        newItem.appendChild(inputText);
        newItem.appendChild(saveButton);

        if (document.getElementById("todoInput").value === '')
            alert("You must write something");
        else
            document.getElementById("list").appendChild(newItem);

        let inputValue = document.getElementById("todoInput").value;

        theList.push(inputValue);
        console.log(theList);

        document.getElementById("todoInput").value = '';

        deleteTodo();

        editTodo();
    }

    deleteTodo();

    editTodo();

    function deleteTodo() {
        let deleteEle = document.getElementsByClassName("glyphicon glyphicon-trash");
        for(let i = 0; i < deleteEle.length; i++){
            deleteEle[i].onclick = function () {
                let div = this.parentElement;
                div.style.display = "none";
            }
        }
    }

    function editTodo() {
        let editEle = document.getElementsByClassName("glyphicon glyphicon-pencil");
        for(let i = 0; i < editEle.length; i++){
            editEle[i].onclick = function () {
                document.getElementById("todo" + (i + 1)).style.display = "none";
                document.getElementById("label" + (i + 1)).style.display = "none";
                document.getElementsByClassName("glyphicon glyphicon-pencil")[i].style.display = "none";
                document.getElementsByClassName("glyphicon glyphicon-trash")[i].style.display = "none";

                document.getElementById("labelEdit" + (i + 1)).style.display = "inline";
                document.getElementById("editText" + (i + 1)).style.display = "inline";
                document.getElementById("buttonSave" + (i + 1)).style.display = "inline";

                let oldText = document.getElementById("label" + (i + 1));
                let newText = document.getElementById("editText" + (i + 1));
                newText.value = oldText.innerHTML;

                document.getElementById("buttonSave" + (i + 1)).onclick = function () {
                    oldText.innerHTML = newText.value;

                    document.getElementById("todo" + (i + 1)).style.display = "inline";
                    document.getElementById("label" + (i + 1)).style.display = "inline";
                    document.getElementsByClassName("glyphicon glyphicon-pencil")[i].style.display = "inline";
                    document.getElementsByClassName("glyphicon glyphicon-trash")[i].style.display = "inline";

                    document.getElementById("labelEdit" + (i + 1)).style.display = "none";
                    document.getElementById("editText" + (i + 1)).style.display = "none";
                    document.getElementById("buttonSave" + (i + 1)).style.display = "none";
                };
            }
        }
    }
</script>
</body>
</html>